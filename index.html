 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FREE Bodyfat% Calculator - Coach Chris</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=Oswald:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        body { 
            font-family: 'Inter', sans-serif; 
            background-color: #0f0f0f;
            color: #ffffff;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 1.5rem 1rem;
        }

        .font-brand { font-family: 'Oswald', sans-serif; }

        input:focus, select:focus {
            outline: none;
            border-color: #000 !important;
            box-shadow: 0 0 0 2px rgba(0,0,0,0.1);
        }

        input[type="number"]::-webkit-outer-spin-button,
        input[type="number"]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type="number"] { -moz-appearance: textfield; }

        .input-group-transition {
            transition: max-height 0.4s ease-in-out, opacity 0.3s ease-in-out, margin 0.3s ease-in-out;
            overflow: hidden;
            max-height: 0;
            opacity: 0;
            margin-top: 0;
        }
        .input-group-transition.active {
            max-height: 120px;
            opacity: 1;
            margin-top: 1rem;
        }

        .custom-shadow {
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .animate-result {
            animation: slideUp 0.5s ease-out forwards;
        }
    </style>
</head>
<body class="antialiased">

    <div class="w-full max-w-md bg-white p-6 sm:p-10 rounded-2xl custom-shadow border border-white/10 text-black"> 

        <header class="mb-8 text-center">
            <div class="font-brand font-bold text-black tracking-wider leading-none">
                <div class="text-3xl sm:text-4xl tracking-widest uppercase font-bold">COACH CHRIS</div>
                <div class="text-[10px] tracking-tight text-black/80 mt-1 leading-none uppercase font-medium">CIRCULAR ROOTS COACHING</div>
                <div class="text-[9px] tracking-tighter text-black/50 leading-none uppercase mt-1 font-medium">TRAIN UNCNVNTNL</div>
            </div>
            <div class="mt-8 mb-2 flex items-center justify-center gap-2">
                <span class="h-[2px] w-6 bg-black"></span>
                <h2 class="text-xl font-black uppercase tracking-tight">Free Body Fat Calculator</h2>
                <span class="h-[2px] w-6 bg-black"></span>
            </div>
            <p class="text-[10px] text-gray-400 uppercase tracking-widest">Uses the US Navy Body Fat Formula</p>
        </header>

        <!-- Unit Toggle -->
        <div class="flex justify-between items-center mb-8 bg-gray-50 p-3 rounded-lg border border-gray-100">
            <span class="text-[10px] font-bold uppercase text-gray-500 tracking-wider">Unit System</span>
            <div class="flex items-center space-x-3">
                <span id="label-metric" class="text-xs font-bold transition-opacity">Metric</span>
                <button type="button" id="unit-master-toggle" class="relative inline-flex h-6 w-12 items-center rounded-full bg-gray-200 transition-colors focus:outline-none">
                    <span id="toggle-knob" class="inline-block h-4 w-4 transform rounded-full bg-white shadow-sm transition-transform translate-x-1"></span>
                </button>
                <span id="label-imperial" class="text-xs font-medium text-gray-400">Imperial</span>
            </div>
        </div>

        <form id="calculator-form" class="space-y-5">
            <div>
                <label class="block text-[10px] font-bold uppercase mb-1.5 text-gray-500 tracking-widest">Gender</label>
                <select id="gender" required class="w-full px-4 py-3.5 bg-gray-50 border border-gray-200 rounded-lg text-sm font-semibold appearance-none">
                    <option value="">Select Gender</option>
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                </select>
            </div>

            <div class="grid grid-cols-2 gap-4">
                <div>
                    <label id="weight-label" class="block text-[10px] font-bold uppercase mb-1.5 text-gray-500 tracking-widest">Weight (kg)</label>
                    <input type="number" id="weight" step="0.1" required class="w-full px-4 py-3.5 bg-gray-50 border border-gray-200 rounded-lg text-sm font-medium" placeholder="0.0">
                </div>
                <div>
                    <label id="height-label" class="block text-[10px] font-bold uppercase mb-1.5 text-gray-500 tracking-widest">Height (cm)</label>
                    <div id="height-metric-container">
                        <input type="number" id="height-cm" step="0.1" class="w-full px-4 py-3.5 bg-gray-50 border border-gray-200 rounded-lg text-sm font-medium" placeholder="0.0">
                    </div>
                    <div id="height-imperial-container" class="hidden flex gap-2">
                        <input type="number" id="height-ft" class="w-1/2 px-4 py-3.5 bg-gray-50 border border-gray-200 rounded-lg text-sm font-medium" placeholder="ft">
                        <input type="number" id="height-in" class="w-1/2 px-4 py-3.5 bg-gray-50 border border-gray-200 rounded-lg text-sm font-medium" placeholder="in">
                    </div>
                </div>
            </div>

            <div>
                <div class="flex justify-between items-center mb-1.5">
                    <label id="neck-label" class="block text-[10px] font-bold uppercase text-gray-500 tracking-widest">Neck (cm)</label>
                    <button type="button" onclick="openModal('neck-modal')" class="text-gray-400 hover:text-black transition-colors">
                        <i data-lucide="info" class="w-4 h-4"></i>
                    </button>
                </div>
                <input type="number" id="neck" step="0.1" required class="w-full px-4 py-3.5 bg-gray-50 border border-gray-200 rounded-lg text-sm font-medium" placeholder="0.0">
            </div>

            <div>
                <div class="flex justify-between items-center mb-1.5">
                    <label id="waist-label" class="block text-[10px] font-bold uppercase text-gray-500 tracking-widest">Waist (cm)</label>
                    <button type="button" onclick="openModal('waist-modal')" class="text-gray-400 hover:text-black transition-colors">
                        <i data-lucide="info" class="w-4 h-4"></i>
                    </button>
                </div>
                <input type="number" id="waist" step="0.1" required class="w-full px-4 py-3.5 bg-gray-50 border border-gray-200 rounded-lg text-sm font-medium" placeholder="0.0">
            </div>

            <div id="hip-container" class="input-group-transition">
                <div class="flex justify-between items-center mb-1.5">
                    <label id="hip-label" class="block text-[10px] font-bold uppercase text-gray-500 tracking-widest">Hip (cm) - Women Only</label>
                    <button type="button" onclick="openModal('hip-modal')" class="text-gray-400 hover:text-black transition-colors">
                        <i data-lucide="info" class="w-4 h-4"></i>
                    </button>
                </div>
                <input type="number" id="hip" step="0.1" class="w-full px-4 py-3.5 bg-gray-50 border border-gray-200 rounded-lg text-sm font-medium" placeholder="0.0">
            </div>

            <button type="submit" class="w-full py-4 bg-black text-white font-black uppercase rounded-lg shadow-xl hover:bg-zinc-800 active:scale-[0.98] transition-all mt-4 tracking-[0.2em] text-xs">
                Calculate Bodyfat %
            </button>
        </form>

        <!-- Results Section -->
        <div id="results" class="hidden mt-10 p-6 bg-zinc-50 border border-black/5 rounded-2xl animate-result">
            <h3 class="text-center font-bold uppercase text-[10px] mb-6 tracking-widest text-gray-400">Estimated Composition</h3>
            
            <div class="text-center mb-8">
                <p id="res-bf" class="text-6xl font-brand font-bold text-black leading-none">0.0%</p>
                <div class="inline-block mt-3 px-3 py-1 bg-black text-white text-[9px] font-black uppercase tracking-widest rounded" id="res-category">
                    ---
                </div>
            </div>

            <div class="grid grid-cols-2 gap-4 border-t border-black/5 pt-6">
                <div class="text-center">
                    <p class="text-[9px] font-bold text-gray-400 uppercase tracking-tighter mb-1">Fat Mass</p>
                    <p id="res-fm" class="text-lg font-brand font-bold">--</p>
                </div>
                <div class="text-center border-l border-black/5">
                    <p class="text-[9px] font-bold text-gray-400 uppercase tracking-tighter mb-1">Lean Mass</p>
                    <p id="res-lbm" class="text-lg font-brand font-bold">--</p>
                </div>
            </div>

            <div class="mt-8 pt-6 border-t border-black/5 text-[10px] text-gray-400 text-center italic leading-relaxed">
                The accuracy of this result depends entirely on precise measurements. Use this tool for tracking trends, not as a definitive medical analysis.
            </div>

            <div class="mt-8">
                <button onclick="resetApp()" class="w-full py-4 bg-gray-200 text-black text-[10px] font-bold uppercase rounded-lg hover:bg-gray-300 active:scale-95 transition-all tracking-widest">Reset Calculator</button>
            </div>
        </div>

        <footer class="mt-10 text-[9px] text-center text-gray-400 leading-tight uppercase tracking-widest">
            <p class="mb-2">&copy; 2024 Circular Roots Coaching. All Rights Reserved.</p>
            <p class="mt-2 text-gray-500 max-w-[300px] mx-auto normal-case tracking-normal">
                Disclaimer: This calculator provides an estimate based on circumference measurements and the US Navy Body Fat Formula. It is not a substitute for professional medical or body composition analysis. Consult a physician before making major dietary or fitness changes.
            </p>
        </footer>
    </div>

    <!-- Modals -->
    <div id="neck-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm">
        <div class="bg-white p-8 rounded-2xl max-w-xs w-full shadow-2xl text-black">
            <h3 class="font-brand font-bold uppercase text-lg mb-3 border-b-2 border-black pb-1">Measure Neck</h3>
            <ul class="text-[12px] text-gray-600 mb-6 space-y-2 list-disc list-inside">
                <li>Stand upright with your head facing forward.</li>
                <li>Place the tape measure just below the **larynx (Adam's apple)**.</li>
                <li>Take the measurement on a **normal exhale**.</li>
            </ul>
            <button onclick="closeModal('neck-modal')" class="w-full py-3 bg-black text-white text-[10px] font-bold uppercase rounded-lg tracking-widest">Got it</button>
        </div>
    </div>

    <div id="waist-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm">
        <div class="bg-white p-8 rounded-2xl max-w-xs w-full shadow-2xl text-black">
            <h3 class="font-brand font-bold uppercase text-lg mb-3 border-b-2 border-black pb-1">Measure Waist</h3>
            <ul class="text-[12px] text-gray-600 mb-6 space-y-2 list-disc list-inside">
                <li>Measure horizontally around the abdomen at the level of the **navel (belly button)**.</li>
                <li>Take the measurement on a **normal exhale**.</li>
            </ul>
            <button onclick="closeModal('waist-modal')" class="w-full py-3 bg-black text-white text-[10px] font-bold uppercase rounded-lg tracking-widest">Got it</button>
        </div>
    </div>

    <div id="hip-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm">
        <div class="bg-white p-8 rounded-2xl max-w-xs w-full shadow-2xl text-black">
            <h3 class="font-brand font-bold uppercase text-lg mb-3 border-b-2 border-black pb-1">Measure Hip</h3>
            <ul class="text-[12px] text-gray-600 mb-6 space-y-2 list-disc list-inside">
                <li>Only required for females.</li>
                <li>Measure horizontally around the **widest part of the hips/buttocks**.</li>
            </ul>
            <button onclick="closeModal('hip-modal')" class="w-full py-3 bg-black text-white text-[10px] font-bold uppercase rounded-lg tracking-widest">Got it</button>
        </div>
    </div>

    <script>
        lucide.createIcons();
        let isMetric = true;
        const CM_TO_IN = 1 / 2.54;
        const KG_TO_LB = 2.20462;

        document.getElementById('unit-master-toggle').addEventListener('click', () => {
            isMetric = !isMetric;
            updateUIUnits();
        });

        function updateUIUnits() {
            const knob = document.getElementById('toggle-knob');
            const bg = document.getElementById('unit-master-toggle');
            const lMetric = document.getElementById('label-metric');
            const lImperial = document.getElementById('label-imperial');
            const hMetricCont = document.getElementById('height-metric-container');
            const hImperialCont = document.getElementById('height-imperial-container');

            if (isMetric) {
                knob.style.transform = 'translateX(0.25rem)';
                bg.classList.replace('bg-black', 'bg-gray-200');
                lMetric.className = 'text-xs font-bold text-black';
                lImperial.className = 'text-xs font-medium text-gray-400';
                hMetricCont.classList.remove('hidden');
                hImperialCont.classList.add('hidden');
                document.getElementById('height-cm').required = true;
                document.getElementById('height-ft').required = false;
                document.getElementById('height-in').required = false;
            } else {
                knob.style.transform = 'translateX(1.75rem)';
                bg.classList.replace('bg-gray-200', 'bg-black');
                lMetric.className = 'text-xs font-medium text-gray-400';
                lImperial.className = 'text-xs font-bold text-black';
                hMetricCont.classList.add('hidden');
                hImperialCont.classList.remove('hidden');
                document.getElementById('height-cm').required = false;
                document.getElementById('height-ft').required = true;
                document.getElementById('height-in').required = true;
            }

            document.getElementById('weight-label').innerText = isMetric ? 'Weight (kg)' : 'Weight (lbs)';
            document.getElementById('height-label').innerText = isMetric ? 'Height (cm)' : 'Height (ft / in)';
            document.getElementById('neck-label').innerText = isMetric ? 'Neck (cm)' : 'Neck (in)';
            document.getElementById('waist-label').innerText = isMetric ? 'Waist (cm)' : 'Waist (in)';
            document.getElementById('hip-label').innerText = isMetric ? 'Hip (cm) - Women Only' : 'Hip (in) - Women Only';
        }

        document.getElementById('gender').addEventListener('change', (e) => {
            const hip = document.getElementById('hip-container');
            if (e.target.value === 'female') {
                hip.classList.add('active');
                document.getElementById('hip').required = true;
            } else {
                hip.classList.remove('active');
                document.getElementById('hip').required = false;
            }
        });

        function openModal(id) { document.getElementById(id).classList.remove('hidden'); }
        function closeModal(id) { document.getElementById(id).classList.add('hidden'); }

        function getCategory(gender, bf) {
            if (gender === 'male') {
                if (bf < 6) return 'Essential Fat';
                if (bf <= 13) return 'Athletic';
                if (bf <= 17) return 'Fitness';
                if (bf <= 24) return 'Acceptable';
                return 'High/Obese';
            } else {
                if (bf < 14) return 'Essential Fat';
                if (bf <= 20) return 'Athletic';
                if (bf <= 24) return 'Fitness';
                if (bf <= 31) return 'Acceptable';
                return 'High/Obese';
            }
        }

        document.getElementById('calculator-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const gender = document.getElementById('gender').value;
            let weightVal = parseFloat(document.getElementById('weight').value);
            let nVal = parseFloat(document.getElementById('neck').value);
            let waVal = parseFloat(document.getElementById('waist').value);
            let hiVal = parseFloat(document.getElementById('hip').value) || 0;

            let weightKg, hInches, nIn, waIn, hiIn;

            if (isMetric) {
                weightKg = weightVal;
                hInches = parseFloat(document.getElementById('height-cm').value) * CM_TO_IN;
                nIn = nVal * CM_TO_IN;
                waIn = waVal * CM_TO_IN;
                hiIn = hiVal * CM_TO_IN;
            } else {
                weightKg = weightVal / KG_TO_LB;
                const ft = parseFloat(document.getElementById('height-ft').value) || 0;
                const inches = parseFloat(document.getElementById('height-in').value) || 0;
                hInches = (ft * 12) + inches;
                nIn = nVal;
                waIn = waVal;
                hiIn = hiVal;
            }

            let bf = 0;
            if (gender === 'male') {
                const diff = waIn - nIn;
                if (diff <= 0) {
                    bf = 5; 
                } else {
                    bf = 86.010 * Math.log10(diff) - 70.041 * Math.log10(hInches) + 36.76;
                }
            } else {
                const sum = waIn + hiIn - nIn;
                if (sum <= 0) {
                    bf = 10;
                } else {
                    bf = 163.205 * Math.log10(sum) - 97.684 * Math.log10(hInches) - 78.387;
                }
            }

            bf = Math.max(2, Math.min(60, bf));
            const category = getCategory(gender, bf);
            const displayMult = isMetric ? 1 : KG_TO_LB;
            const unitSuffix = isMetric ? 'kg' : 'lbs';

            document.getElementById('res-bf').innerText = bf.toFixed(1) + '%';
            document.getElementById('res-category').innerText = category;
            document.getElementById('res-fm').innerText = (weightKg * (bf/100) * displayMult).toFixed(1) + ' ' + unitSuffix;
            document.getElementById('res-lbm').innerText = (weightKg * (1 - bf/100) * displayMult).toFixed(1) + ' ' + unitSuffix;
            
            document.getElementById('results').classList.remove('hidden');
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        });

        function resetApp() {
            document.getElementById('calculator-form').reset();
            document.getElementById('results').classList.add('hidden');
            document.getElementById('hip-container').classList.remove('active');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        updateUIUnits();
    </script>
</body>
</html>

